name: "Release a tag"
on:
  pull_request:
    branches: [main]

jobs:
  release:
    name: Publish Binaries
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    steps:
      - uses: actions/checkout@v3
      - uses: smartcontractkit/tool-versions-to-env-action@v1.0.6
        id: go-version
      - name: Install Go ${{ steps.go-version.outputs.golang_version }}
        uses: actions/setup-go@v3
        with:
          go-version: ${{ steps.go-version.outputs.golang_version }}
      - name: Download Go Vendor Packages and Ginkgo
        if: steps.cache-packages.outputs.cache-hit != 'true'
        run: make install_ci
      - name: Generate the artifacts
        uses: skx/github-action-build@master
        with:
          builder: .github/build.sh
      # - name: github-action-publish-binaries
      #   uses: skx/github-action-publish-binaries@release-2.0